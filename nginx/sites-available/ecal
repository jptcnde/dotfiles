server {
    listen 80;
    listen [::]:80;
    server_name dev-admin.ecal.com dev-api.ecal.com;
    add_header Access-Control-Allow-Origin '*';
    add_header Access-Control-Allow-Methods 'GET, POST, DELETE, PUT, OPTIONS';
    root /home/jpt/dev/ecal/ecal-ecal-app/public/;

    index       index.html index.htm index.php;

  location / {
    try_files $uri $uri/ /index.php$is_args$args;
  }

  # static file 404's aren't logged and expires header is set to maximum age
  #location ~* \.(jpg|jpeg|gif|css|png|js|ico|html)$ {
  #  access_log off;
  #  expires max;
  #}

    access_log /home/jpt/dev/ecal/ecal-ecal-app/log/access.log;

    if (!-e $request_filename) {
     rewrite ^.*$ /index.php last;
  }

  location ~ \.php$ {
        fastcgi_index index.php;
    fastcgi_split_path_info ^(.+\.php)(/.+)$;
    fastcgi_pass unix:run/php/php5.6-fpm.sock;
        include fastcgi_params;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param   SCRIPT_NAME        $fastcgi_script_name;
  }

    location ~/\.ht {
            deny all;
    }
}
